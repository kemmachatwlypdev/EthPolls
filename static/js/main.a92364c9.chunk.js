(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{297:function(e,t,a){e.exports=a(864)},302:function(e,t,a){},305:function(e,t,a){},316:function(e,t){},324:function(e,t){},340:function(e,t){},342:function(e,t){},357:function(e,t){},445:function(e,t){},864:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(290),i=a.n(l),o=(a(302),a(5)),r=a.n(o),c=a(40),p=a(6),u=a(9),m=a(11),y=a(10),d=a(12),h=(a(305),a(119)),b=a.n(h),E=new b.a(window.web3.currentProvider),x=new E.eth.Contract([{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"activePolls",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"pollStatus",outputs:[{name:"isOpen",type:"bool"},{name:"isPublic",type:"bool"},{name:"yes",type:"uint256"},{name:"no",type:"uint256"},{name:"total",type:"uint256"},{name:"allowed",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"pollHash",type:"bytes32"}],name:"cancelPoll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"getName",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"polls",outputs:[{name:"isClosed",type:"bool"},{name:"isPublic",type:"bool"},{name:"creator",type:"address"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"yesVotes",type:"uint256"},{name:"noVotes",type:"uint256"},{name:"totalVotes",type:"uint256"},{name:"start",type:"uint256"},{name:"expiration",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"getDesc",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"isExpired",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"description",type:"string"},{name:"name",type:"string"},{name:"isPublic",type:"bool"},{name:"allowed",type:"address[]"},{name:"expiration",type:"uint256"}],name:"createPoll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"name",type:"string"},{name:"creator",type:"address"}],name:"calcPollHash",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"pollHash",type:"bytes32"},{name:"voteChoice",type:"bool"}],name:"vote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"ownedPolls",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"pollHash",type:"bytes32"},{name:"allowed",type:"address[]"}],name:"addAllowedUsers",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"archive",outputs:[{name:"isClosed",type:"bool"},{name:"isPublic",type:"bool"},{name:"creator",type:"address"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"yesVotes",type:"uint256"},{name:"noVotes",type:"uint256"},{name:"totalVotes",type:"uint256"},{name:"start",type:"uint256"},{name:"expiration",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],"0x2907c2476ef38579a9e6650241da80ec1a8225ce"),v=new E.eth.Contract([{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"activePolls",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"pollStatus",outputs:[{name:"isOpen",type:"bool"},{name:"isPublic",type:"bool"},{name:"options",type:"string[]"},{name:"results",type:"uint256[]"},{name:"allowed",type:"address[]"},{name:"total",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"pollHash",type:"bytes32"}],name:"cancelPoll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"getName",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"polls",outputs:[{name:"isClosed",type:"bool"},{name:"isPublic",type:"bool"},{name:"creator",type:"address"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"totalVotes",type:"uint256"},{name:"start",type:"uint256"},{name:"expiration",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"getDesc",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"pollHash",type:"bytes32"}],name:"isExpired",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"name",type:"string"},{name:"creator",type:"address"}],name:"calcPollHash",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"pollHash",type:"bytes32"},{name:"voteChoice",type:"uint256"}],name:"vote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"ownedPolls",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"pollHash",type:"bytes32"},{name:"allowed",type:"address[]"}],name:"addAllowedUsers",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"description",type:"string"},{name:"name",type:"string"},{name:"options",type:"string[]"},{name:"allowed",type:"address[]"},{name:"isPublic",type:"bool"},{name:"expiration",type:"uint256"}],name:"createPoll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"archive",outputs:[{name:"isClosed",type:"bool"},{name:"isPublic",type:"bool"},{name:"creator",type:"address"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"totalVotes",type:"uint256"},{name:"start",type:"uint256"},{name:"expiration",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],"0xd17C31De7eb280016001f87F5E0Efd0146fC3cc1"),f=a(120),g=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(y.a)(t).call(this,e))).state={chartData:{labels:["No","Yes"],datasets:[{label:"Votes",data:[a.props.noData,a.props.yesData,0],backgroundColor:["rgba(237, 45, 45,0.7)","rgba(28, 181, 28,0.7)"]}]}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"test",value:function(){console.log(this.props.noData),console.log(this.props.yesData)}},{key:"componentDidMount",value:function(){this.test()}},{key:"render",value:function(){return s.a.createElement("div",{className:"chart"},s.a.createElement(f.a,{data:this.state.chartData,options:{title:{display:!0,text:"Poll Voting Data"},legend:{display:!1}}}))}}]),t}(n.Component);g.defaultProps={noData:0,yesData:0};var w=g,S=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(y.a)(t).call(this,e))).state={chartData:{labels:a.props.labels,datasets:[{label:"Votes",data:a.props.results,backgroundColor:a.props.bcgColors}]}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"test",value:function(){console.log(this.props.labels),console.log(this.props.results),console.log(this.props.bcgColors)}},{key:"componentDidMount",value:function(){this.test()}},{key:"render",value:function(){return s.a.createElement("div",{className:"chart"},s.a.createElement(f.a,{data:this.state.chartData,options:{title:{display:!0,text:"Poll Voting Data"},legend:{display:!1}}}))}}]),t}(n.Component);S.defaultProps={labels:[],results:[],bcgColors:[]};var N=S,k=a(293),D=a.n(k),C=a(294),P=a.n(C),M=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(l)))).state={web3:{},user:"",userMessage:"Not Connected",pollhash:"",pollType:"",pollName:"",pollDescription:"",ispublic:"",allowed:[],isallowed:!1,spinnerdisplay:"none",votecasted:"none",expiration:0,yesVotes:"",noVotes:"",chart:"",yesNoDisplay:"none",options:[],results:[],multiChart:"",multiDataDisplay:"none",multiDataHTML:[],voteOptionsHTML:[],voteChoice:0,votebtndisplay:"none",colorList:["#C7CEEA","#B5EAD7","#E2F0CB","#FFDAC1","#FFB7B2"],modColorList:[],o1:"none",o2:"none",o3:"none",o4:"none",o5:"none",searchdisplay:"initial",createdisplay:"none",mydisplay:"none",option1:"",option2:"",option3:"",option4:"",option5:"",step:"1",hasPassed:!1,isready:0,buttonText:"Next Steps",createspinner:"none",ispublicDisplay:"none",pollTypeDisplay:"initial",enterNameDisplay:"none",expirationDisplay:"none",optionsDisplay:"none",allowedDisplay:"none",createpolldisplay:"none",pollHashListYesNo:[],pollHashListMulti:[],yesNoHTML:[],multiHTML:[],multiPollHashDisplay:[],dashboardSpinner:"none"},a.getUser=function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.searchPoll=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,l,i,o,c,p,u,m,y,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.web3.eth.getAccounts();case 3:if(n=e.sent,""!==a.state.pollhash){e.next=8;break}alert("This Poll Hash does not exist or is not valid"),e.next=79;break;case 8:if(""!==a.state.pollType){e.next=12;break}alert("Please select the poll type."),e.next=79;break;case 12:if("yesNo"!==a.state.pollType){e.next=45;break}return a.setState({multiDataDisplay:"none"}),e.next=16,x.methods.pollStatus(a.state.pollhash).call({from:n[0]});case 16:return l=e.sent,i=parseInt(l.no),o=parseInt(l.yes),a.setState({noVotes:[i]}),a.setState({yesVotes:o}),a.setState({ispublic:l.isPublic}),a.setState({allowed:l.allowed}),e.t0=a,e.next=26,x.methods.getDesc(a.state.pollhash).call();case 26:return e.t1=e.sent,e.t2={pollDescription:e.t1},e.t0.setState.call(e.t0,e.t2),e.t3=a,e.next=32,x.methods.getName(a.state.pollhash).call();case 32:for(e.t4=e.sent,e.t5={pollName:e.t4},e.t3.setState.call(e.t3,e.t5),a.setState({yesNoDisplay:"initial"}),c=0;c<a.state.allowed.length;c++)a.state.allowed[c]===n[0]&&(a.setState({isallowed:!0}),a.setState({votebtndisplay:"initial"}));return 0===a.state.allowed.length?(a.setState({votebtndisplay:"initial"}),a.setState({isallowed:!0})):!1===a.state.isallowed&&a.setState({allowedmessage:"You are not allowed to vote on this poll."}),e.next=40,x.methods.isExpired(a.state.pollhash).call();case 40:!0===e.sent&&(a.setState({allowedmessage:"This poll has expired"}),a.setState({votebtndisplay:"none"})),a.setState({chart:s.a.createElement(w,{yesData:parseInt(a.state.yesVotes),noData:parseInt(a.state.noVotes),redraw:!0})}),e.next=79;break;case 45:if("multiData"!==a.state.pollType){e.next=79;break}return a.setState({yesNoDisplay:"none"}),e.next=49,v.methods.pollStatus(a.state.pollhash).call({from:n[0]});case 49:return p=e.sent,u=p.results,m=p.options,y=p.allowed,a.setState({results:u}),a.setState({options:m}),a.setState({allowed:y}),a.setState({ispublic:p.isPublic}),e.t6=a,e.next=60,v.methods.getDesc(a.state.pollhash).call();case 60:return e.t7=e.sent,e.t8={pollDescription:e.t7},e.t6.setState.call(e.t6,e.t8),e.t9=a,e.next=66,v.methods.getName(a.state.pollhash).call();case 66:for(e.t10=e.sent,e.t11={pollName:e.t10},e.t9.setState.call(e.t9,e.t11),d=0;d<a.state.allowed.length;d++)a.state.allowed[d]===n[0]&&(a.setState({isallowed:!0}),a.setState({votebtndisplay:"initial"}));return 0===a.state.allowed.length?(a.setState({votebtndisplay:"initial"}),a.setState({isallowed:!0})):!1===a.state.isallowed&&a.setState({allowedmessage:"You are not allowed to vote on this poll."}),e.next=73,v.methods.isExpired(a.state.pollhash).call();case 73:!0===e.sent&&(a.setState({allowedmessage:"This poll has expired"}),a.setState({votebtndisplay:"none"})),a.setState({modColorList:a.state.colorList.slice(0,a.state.colorList.length-1)}),a.setState({multiChart:s.a.createElement(N,{labels:a.state.options,results:a.state.results,bcgColors:a.state.modColorList,redraw:!0})}),5===a.state.options.length?(a.setState({o1:"initial"}),a.setState({o2:"initial"}),a.setState({o3:"initial"}),a.setState({o4:"initial"}),a.setState({o5:"initial"})):4===a.state.options.length?(a.setState({o1:"initial"}),a.setState({o2:"initial"}),a.setState({o3:"initial"}),a.setState({o4:"initial"})):3===a.state.options.length?(a.setState({o1:"initial"}),a.setState({o2:"initial"}),a.setState({o3:"initial"})):2===a.state.options.length&&(a.setState({o1:"initial"}),a.setState({o2:"initial"})),a.setState({multiDataDisplay:"initial"});case 79:e.next=85;break;case 81:e.prev=81,e.t12=e.catch(0),console.log(e.t12),alert("Please make sure the pollhash is valid. Otherwise ensure that either metamask is installed and you are logged into it or you are using an Ethereum Browser");case 85:case"end":return e.stop()}},e,null,[[0,81]])}));return function(t){return e.apply(this,arguments)}}(),a.voteYes=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.prev=1,e.next=4,a.web3.eth.getAccounts();case 4:return s=e.sent,n=!0,a.setState({spinnerdisplay:"initial"}),e.next=9,x.methods.vote(a.state.pollhash,!0).send({from:s[0]});case 9:a.setState({spinnerdisplay:"none"}),a.setState({votecasted:"initial"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),!1===n?(console.log(e.t0),alert("Please make sure either metamask is installed and you are logged into it or you are using an Ethereum Browser")):(a.setState({spinnerdisplay:"none"}),a.setState({votecasted:"initial"}));case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),a.voteNo=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.prev=1,e.next=4,a.web3.eth.getAccounts();case 4:return s=e.sent,n=!0,a.setState({spinnerdisplay:"initial"}),e.next=9,x.methods.vote(a.state.pollhash,!1).send({from:s[0]});case 9:a.setState({spinnerdisplay:"none"}),a.setState({votecasted:"initial"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),!1===n?(console.log(e.t0),alert("Please make sure either metamask is installed and you are logged into it or you are using an Ethereum Browser")):(a.setState({spinnerdisplay:"none"}),a.setState({votecasted:"initial"}));case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),a.multiVote=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.prev=1,e.next=4,a.web3.eth.getAccounts();case 4:return s=e.sent,n=!0,a.setState({spinnerdisplay:"initial"}),e.next=9,v.methods.vote(a.state.pollhash,a.state.voteChoice+1).send({from:s[0]});case 9:a.setState({spinnerdisplay:"none"}),a.setState({votecasted:"initial"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),!1===n?(console.log(e.t0),alert("Please make sure either metamask is installed and you are logged into it or you are using an Ethereum Browser")):(a.setState({spinnerdisplay:"none"}),a.setState({votecasted:"initial"}));case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),a.nextstep=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,s,l,i,o,c,p,u,m,y,d,h,b;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=1,!(parseInt(a.state.step)<6)){e.next=6;break}"1"===a.state.step?(a.setState({pollTypeDisplay:"none"}),a.setState({ispublicDisplay:"initial"})):2===a.state.step?(a.setState({ispublicDisplay:"none"}),a.setState({enterNameDisplay:"initial"})):3===a.state.step?(a.setState({enterNameDisplay:"none"}),a.setState({expirationDisplay:"initial"}),!0===a.state.ispublic&&"yesNo"===a.state.pollType&&(n+=2)):"multiData"===a.state.pollType&&!1===a.state.hasPassed?(a.setState({expirationDisplay:"none"}),a.setState({optionsDisplay:"initial"}),a.setState({hasPassed:!0}),!0===a.state.ispublic&&(n+=1)):!1===a.state.ispublic&&(a.setState({optionsDisplay:"none"}),a.setState({expirationDisplay:"none"}),a.setState({allowedDisplay:"initial"}),n+=1),e.next=102;break;case 6:if(!0!==a.state.ispublic||"multiData"!==a.state.pollType){e.next=28;break}if(!(a.state.isready>0)){e.next=21;break}return a.setState({createspinner:"initial"}),e.next=11,a.web3.eth.getAccounts();case 11:return s=e.sent,e.next=14,v.methods.calcPollHash(a.state.pollName,s[0]).call();case 14:return l=e.sent,e.next=17,a.setState({pollhash:l});case 17:return e.next=19,v.methods.createPoll(a.state.pollDescription,a.state.pollName,[a.state.option1,a.state.option2,a.state.option3,a.state.option4,a.state.option5],[],!0,3600*a.state.expiration).send({from:s[0]});case 19:e.next=26;break;case 21:a.setState({isready:1}),a.setState({createpolldisplay:"initial"}),a.setState({optionsDisplay:"none"}),a.setState({expirationDisplay:"none"}),a.setState({buttonText:"Create Your Poll"});case 26:e.next=102;break;case 28:if(!1!==a.state.ispublic||"multiData"!==a.state.pollType){e.next=55;break}if(!(a.state.isready>0)){e.next=47;break}return a.setState({createspinner:"initial"}),e.next=33,a.web3.eth.getAccounts();case 33:for(i=e.sent,o=[],c=0;c<a.state.allowed.length;c++)o.push(a.state.allowed[c].replace(/^\s+|\s+$/g,""));return e.next=38,a.setState({allowed:o});case 38:return e.next=40,v.methods.calcPollHash(a.state.pollName,i[0]).call();case 40:return p=e.sent,e.next=43,a.setState({pollhash:p});case 43:return e.next=45,v.methods.createPoll(a.state.pollDescription,a.state.pollName,[a.state.option1,a.state.option2,a.state.option3,a.state.option4,a.state.option5],a.state.allowed,!1,3600*a.state.expiration).send({from:i[0]});case 45:e.next=53;break;case 47:a.setState({isready:1}),a.setState({createpolldisplay:"initial"}),a.setState({optionsDisplay:"none"}),a.setState({expirationDisplay:"none"}),a.setState({allowedDisplay:"none"}),a.setState({buttonText:"Create Your Poll"});case 53:e.next=102;break;case 55:if(!0!==a.state.ispublic||"yesNo"!==a.state.pollType){e.next=77;break}if(!(a.state.isready>0)){e.next=70;break}return a.setState({createspinner:"initial"}),e.next=60,a.web3.eth.getAccounts();case 60:return u=e.sent,e.next=63,x.methods.calcPollHash(a.state.pollName,u[0]).call();case 63:return m=e.sent,e.next=66,a.setState({pollhash:m});case 66:return e.next=68,x.methods.createPoll(a.state.pollDescription,a.state.pollName,!0,[],3600*a.state.expiration).send({from:u[0]});case 68:e.next=75;break;case 70:a.setState({isready:1}),a.setState({createpolldisplay:"initial"}),a.setState({optionsDisplay:"none"}),a.setState({expirationDisplay:"none"}),a.setState({buttonText:"Create Your Poll"});case 75:e.next=102;break;case 77:if(!1!==a.state.ispublic||"yesNo"!==a.state.pollType){e.next=102;break}if(!(a.state.isready>0)){e.next=96;break}return a.setState({createspinner:"initial"}),e.next=82,a.web3.eth.getAccounts();case 82:for(y=e.sent,d=[],h=0;h<a.state.allowed.length;h++)d.push(a.state.allowed[h].replace(/^\s+|\s+$/g,""));return e.next=87,x.methods.calcPollHash(a.state.pollName,y[0]).call();case 87:return b=e.sent,e.next=90,a.setState({pollhash:b});case 90:return e.next=92,a.setState({allowed:d});case 92:return e.next=94,x.methods.createPoll(a.state.pollDescription,a.state.pollName,!1,a.state.allowed,3600*a.state.expiration).send({from:y[0]});case 94:e.next=102;break;case 96:a.setState({isready:1}),a.setState({createpolldisplay:"initial"}),a.setState({optionsDisplay:"none"}),a.setState({expirationDisplay:"none"}),a.setState({allowedDisplay:"none"}),a.setState({buttonText:"Create Your Poll"});case 102:n+=parseInt(a.state.step),a.setState({step:n}),e.next=109;break;case 106:e.prev=106,e.t0=e.catch(0),a.setState({createspinner:"none"});case 109:case"end":return e.stop()}},e,null,[[0,106]])}));return function(t){return e.apply(this,arguments)}}(),a.getYesNo=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,l,i,o,c,p,u,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],l=0,e.next=4,a.web3.eth.getAccounts();case 4:i=e.sent;case 5:if(!(l<256)){e.next=24;break}return e.prev=6,e.next=9,x.methods.activePolls(a.state.user,l).call();case 9:if(o=e.sent,console.log(o),null===o){e.next=15;break}n.push(o),e.next=16;break;case 15:return e.abrupt("break",24);case 16:l++,e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(6),e.abrupt("break",24);case 22:e.next=5;break;case 24:return e.next=26,a.setState({pollHashListYesNo:n});case 26:console.log(a.state.pollHashListYesNo),c=[],p=[s.a.createElement("h2",null,"Yes/No Polls")],u=r.a.mark(function e(){var t,n,l,o,u,y,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.methods.pollStatus(a.state.pollHashListYesNo[m]).call({from:i[0]});case 2:return t=e.sent,n=parseInt(t.no),l=parseInt(t.yes),e.next=7,x.methods.getName(a.state.pollHashListYesNo[m]).call();case 7:return o=e.sent,e.next=10,x.methods.getDesc(a.state.pollHashListYesNo[m]).call();case 10:u=e.sent,y="yesNo"+m.toString(),d=s.a.createElement("div",{className:"column",style:{textAlign:"center"}},s.a.createElement("h3",null,o),s.a.createElement("p",null,u),s.a.createElement("p",null,"Yes Votes: ",l),s.a.createElement("p",null,"No Votes: ",n),s.a.createElement("button",{className:"pollhashbutton",onClick:function(e){return a.switchDisplay(y)}},"Show Poll ID"),s.a.createElement("br",null),s.a.createElement("p",{id:y,style:{fontSize:"11px",display:"none"}},a.state.pollHashListYesNo[m])),c.splice(c.length-2,0,d),m+1>2&&(m+1)%3===0?(p.push(c),p.push([s.a.createElement("br",null)]),p.push([s.a.createElement("span",{style:{marginLeft:"10%",marginRight:"10%"}},s.a.createElement("hr",null))]),c=[]):m+1===a.state.pollHashListYesNo.length&&(p.push(c),p.push([s.a.createElement("br",null)]),c=[]);case 15:case"end":return e.stop()}},e)}),m=0;case 31:if(!(m<a.state.pollHashListYesNo.length)){e.next=36;break}return e.delegateYield(u(),"t1",33);case 33:m++,e.next=31;break;case 36:a.setState({yesNoHTML:p});case 37:case"end":return e.stop()}},e,null,[[6,19]])}));return function(t){return e.apply(this,arguments)}}(),a.getMulti=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,l,i,o,c,p,u,m,y;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,l=[],e.next=4,a.web3.eth.getAccounts();case 4:i=e.sent;case 5:if(!(n<256)){e.next=24;break}return e.prev=6,e.next=9,v.methods.activePolls(a.state.user,n).call();case 9:if(o=e.sent,console.log(o),null===o){e.next=15;break}l.push(o),e.next=16;break;case 15:return e.abrupt("break",24);case 16:n++,e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(6),e.abrupt("break",24);case 22:e.next=5;break;case 24:return e.next=26,a.setState({pollHashListMulti:l});case 26:console.log(a.state.pollHashListMulti),c=[],p=[s.a.createElement("h2",null,"Multi-Data Polls")],u=r.a.mark(function e(){var t,n,l,o,u,d,h,b;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.methods.pollStatus(a.state.pollHashListMulti[m]).call({from:i[0]});case 2:return t=e.sent,n=t.results,l=t.options,e.next=7,v.methods.getName(a.state.pollHashListMulti[m]).call();case 7:return o=e.sent,e.next=10,v.methods.getDesc(a.state.pollHashListMulti[m]).call();case 10:for(u=e.sent,d=[],y=0;y<l.length;y++)""!==l[y]&&d.push(s.a.createElement("p",null,l[y]+": "+n[y]));h="multi"+m.toString(),b=s.a.createElement("div",{className:"column",style:{textAlign:"center"}},s.a.createElement("h3",null,o),s.a.createElement("p",null,u),d,s.a.createElement("button",{className:"pollhashbutton",onClick:function(e){return a.switchDisplay(h)}},"Show Poll ID"),s.a.createElement("br",null),s.a.createElement("p",{id:h,style:{fontSize:"11px",display:"none"}},a.state.pollHashListMulti[m])),c.splice(c.length-2,0,b),m+1>2&&(m+1)%3===0?(p.push(c),p.push([s.a.createElement("br",null)]),p.push([s.a.createElement("span",{style:{marginLeft:"10%",marginRight:"10%"}},s.a.createElement("hr",null))]),c=[]):m+1===a.state.pollHashListMulti.length&&(p.push(c),p.push([s.a.createElement("br",null)]),c=[]);case 17:case"end":return e.stop()}},e)}),m=0;case 31:if(!(m<a.state.pollHashListMulti.length)){e.next=36;break}return e.delegateYield(u(),"t1",33);case 33:m++,e.next=31;break;case 36:a.setState({multiHTML:p});case 37:case"end":return e.stop()}},e,null,[[6,19]])}));return function(t){return e.apply(this,arguments)}}(),a.displayDashboard=function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({createdisplay:"none",mydisplay:"initial",searchdisplay:"none"});case 2:return e.next=4,a.setState({dashboardSpinner:"initial"});case 4:return e.next=6,a.getMulti();case 6:return e.next=8,a.getYesNo();case 8:return e.next=10,a.setState({dashboardSpinner:"none"});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"connectEthereum",value:function(){var e=Object(c.a)(r.a.mark(function e(){var t,a,n,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={walletconnect:{package:P.a,options:{infuraId:"INFURA_ID"}}},a=new D.a({providerOptions:t}),e.next=4,a.connect();case 4:if(n=e.sent,s=new b.a(n),this.web3=s,!s){e.next=16;break}return e.next=10,s.eth.getAccounts();case 10:return l=e.sent,this.setState({user:l[0]}),this.setState({userMessage:"Current User:"}),e.abrupt("return",s);case 16:return alert("Please install an Ethereum-compatible browser or extension like MetaMask to use this dApp"),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"switchDisplay",value:function(e){"none"===document.getElementById(e).style.display?(document.getElementById(e).style.display="inline",console.log("success")):document.getElementById(e).style.display="none"}},{key:"componentDidMount",value:function(){this.connectEthereum(),this.getUser()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"header"},s.a.createElement("h1",null,s.a.createElement("a",{href:"https://ethpolls.com",className:"title"},"EthPolls")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement("br",null),s.a.createElement("div",{className:"subheader"},s.a.createElement("p",{className:"user"},s.a.createElement("span",{className:"pulsate"},s.a.createElement("span",{className:"userMessage"},this.state.userMessage)," ",this.state.user)),s.a.createElement("span",{className:"switches"},s.a.createElement("button",{className:"astext",onClick:function(e){return window.location.reload()}},"Search for a Poll")," ",s.a.createElement("span",{className:"lines"}," | "),s.a.createElement("button",{className:"astext",onClick:function(t){return e.setState({createdisplay:"initial",mydisplay:"none",searchdisplay:"none"})}},"Create a Poll")," ",s.a.createElement("span",{className:"lines"}," | "),s.a.createElement("button",{className:"astext",onClick:function(t){return e.displayDashboard()}},"View My Polls"))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"pollSearch",style:{display:this.state.searchdisplay}},s.a.createElement("div",{className:"searchBox"},s.a.createElement("h1",null,"Enter Poll ID"),s.a.createElement("p",null,"Enter the Poll ID of the poll you wish to search then select its poll type"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("input",{type:"text",placeholder:"Type Poll ID Here ...",pollhash:this.state.value,onChange:function(t){return e.setState({pollhash:t.target.value})}}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{className:"container"},"Yes/No Poll",s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({pollType:"yesNo"})}}),s.a.createElement("span",{className:"checkmark"})),s.a.createElement("label",{className:"container"},"Multi-Data Poll",s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({pollType:"multiData"})}}),s.a.createElement("span",{className:"checkmark"}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"centerbtn"},s.a.createElement("button",{onClick:this.searchPoll,className:"button"},"Search")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"poll",id:"yesNo",style:{display:this.state.yesNoDisplay}},s.a.createElement("p",null,"Poll Name:"),s.a.createElement("h1",null,this.state.pollName),s.a.createElement("p",null,"Description:"),s.a.createElement("h4",null,this.state.pollDescription),s.a.createElement("h4",null,s.a.createElement("span",{style:{textAlign:"left"}},"No Votes: ",this.state.noVotes),"\xa0\xa0\xa0\xa0",s.a.createElement("span",{style:{textAlign:"right"}},"Yes Votes: ",this.state.yesVotes)),s.a.createElement("div",{className:"chart"},this.state.chart,s.a.createElement("p",null,this.state.allowedmessage),s.a.createElement("span",null,s.a.createElement("button",{style:{display:this.state.votebtndisplay},onClick:this.voteNo,id:"noBtn"},"Vote No"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",s.a.createElement("button",{style:{display:this.state.votebtndisplay},onClick:this.voteYes,id:"yesBtn"},"Vote Yes"))),s.a.createElement("br",null),s.a.createElement("div",{className:"loading-spinner",style:{display:this.state.spinnerdisplay,textAlign:"center"}},s.a.createElement("div",{className:"load-1"},s.a.createElement("p",{className:"pulsate"},"Voting...(Approximately 1 Minute)"),s.a.createElement("div",{className:"line",id:"clearline"}),s.a.createElement("div",{className:"line"}),s.a.createElement("div",{className:"line"}),s.a.createElement("div",{className:"line"}))),s.a.createElement("div",{className:"center"},s.a.createElement("h4",{style:{display:this.state.votecasted,textAlign:"center",color:"#383838"}},"Your vote has been casted! Refresh the page and re-enter the poll hash to see the updated results!")),s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement("div",{className:"poll",id:"multiData",style:{display:this.state.multiDataDisplay}},s.a.createElement("p",null,"Poll Name:"),s.a.createElement("h1",null,this.state.pollName),s.a.createElement("p",null,"Description:"),s.a.createElement("h4",null,this.state.pollDescription),this.state.multiDataHTML,s.a.createElement("div",{className:"multiChart"},this.state.multiChart),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{style:{display:this.state.o1},className:"container"}," ",this.state.options[0],s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({voteChoice:0})}}),s.a.createElement("span",{className:"checkmark"}))),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{style:{display:this.state.o2},className:"container"},this.state.options[1],s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({voteChoice:1})}}),s.a.createElement("span",{className:"checkmark"}))),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{style:{display:this.state.o3},className:"container"},this.state.options[2],s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({voteChoice:2})}}),s.a.createElement("span",{className:"checkmark"}))),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{style:{display:this.state.o4},className:"container"},this.state.options[3],s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({voteChoice:3})}}),s.a.createElement("span",{className:"checkmark"}))),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{style:{display:this.state.o5},className:"container"},this.state.options[4],s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({voteChoice:4})}}),s.a.createElement("span",{className:"checkmark"}))),s.a.createElement("p",null,this.state.allowedmessage),s.a.createElement("div",{className:"multiBtn"},s.a.createElement("button",{style:{display:this.state.votebtndisplay},onClick:this.multiVote,id:"multiVote"},"Vote")),s.a.createElement("br",null),s.a.createElement("div",{className:"loading-spinner",style:{display:this.state.spinnerdisplay,textAlign:"center"}},s.a.createElement("div",{className:"load-1"},s.a.createElement("p",{className:"pulsate"},"Voting...(Approximately 1 Minute)"),s.a.createElement("div",{className:"line",id:"clearline"}),s.a.createElement("div",{className:"line"}),s.a.createElement("div",{className:"line"}),s.a.createElement("div",{className:"line"}))),s.a.createElement("div",{className:"center"},s.a.createElement("h4",{style:{display:this.state.votecasted,textAlign:"center",color:"#383838"}},"Your vote has been casted! Refresh the page and re-enter the poll hash to see the updated results!"))),s.a.createElement("br",null)),s.a.createElement("div",{className:"createPoll",style:{display:this.state.createdisplay}},s.a.createElement("div",{className:"searchbox"},s.a.createElement("h4",{style:{marginLeft:"25%"}},"Step ",this.state.step),s.a.createElement("div",{style:{display:this.state.pollTypeDisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Choose Poll Type"),s.a.createElement("p",{style:{textAlign:"center"}},"Decide which type of poll you would like to create"),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{className:"container"},"Yes/No Poll",s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({pollType:"yesNo"})}}),s.a.createElement("span",{className:"checkmark"})),s.a.createElement("label",{className:"container"},"Multi-Data Poll",s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({pollType:"multiData"})}}),s.a.createElement("span",{className:"checkmark"})))),s.a.createElement("div",{style:{display:this.state.ispublicDisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Choose Poll Type"),s.a.createElement("p",{style:{textAlign:"center"}},"Decide which type of poll you would like to create"),s.a.createElement("div",{className:"radioButtons"},s.a.createElement("label",{className:"container"},"Public",s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({ispublic:!0})}}),s.a.createElement("span",{className:"checkmark"})),s.a.createElement("label",{className:"container"},"Restricted (only users you choose can vote)",s.a.createElement("input",{name:"radio",type:"radio",onClick:function(t){return e.setState({ispublic:!1})}}),s.a.createElement("span",{className:"checkmark"})))),s.a.createElement("div",{style:{display:this.state.enterNameDisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Enter Poll Name and Description"),s.a.createElement("p",{style:{textAlign:"center"}},"Type the name of your poll followed by a description"),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("input",{onChange:function(t){return e.setState({pollName:t.target.value})},placeholder:"Enter Name Here",id:"my-text-field",type:"text",maxLength:"100",style:{width:"12%",color:"black"}}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("textarea",{onChange:function(t){return e.setState({pollDescription:t.target.value})},id:"my-textarea",maxLength:"500","data-counter-label":"",style:{height:"300px",width:"300px"}}))),s.a.createElement("div",{style:{display:this.state.expirationDisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Decide if your poll will expire"),s.a.createElement("p",{style:{textAlign:"center"}},"Choose whether or not your poll will expire. If your poll will not expire, enter 0. Otherwise select the amount of hours it will last."),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("input",{onChange:function(t){return e.setState({expiration:parseInt(t.target.value)})},placeholder:"Hours",id:"my-text-field",type:"text",maxLength:"15",style:{width:"8%",color:"black"}}),s.a.createElement("br",null))),s.a.createElement("div",{style:{display:this.state.optionsDisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Enter your Voting Options"),s.a.createElement("p",{style:{textAlign:"center"}},"Type in the things that voters will be voting on."),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("input",{onChange:function(t){return e.setState({option1:t.target.value})},placeholder:"Option 1",id:"my-text-field",type:"text",style:{width:"8%",color:"black"}}),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(t){return e.setState({option2:t.target.value})},placeholder:"Option 2",id:"my-text-field",type:"text",style:{width:"8%",color:"black"}}),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(t){return e.setState({option3:t.target.value})},placeholder:"Option 3",id:"my-text-field",type:"text",style:{width:"8%",color:"black"}}),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(t){return e.setState({option4:t.target.value})},placeholder:"Option 4",id:"my-text-field",type:"text",style:{width:"8%",color:"black"}}),s.a.createElement("br",null),s.a.createElement("input",{onChange:function(t){return e.setState({option5:t.target.value})},placeholder:"Option 5",id:"my-text-field",type:"text",style:{width:"8%",color:"black"}}),s.a.createElement("br",null))),s.a.createElement("div",{style:{display:this.state.allowedDisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Enter a comma separated list of users"),s.a.createElement("p",{style:{textAlign:"center"}},"Example: 0x74ff48fc3762eB4dC5E579A73ECffCBab4b9939E,0x9E01CBf6e04aBc6157Fe538A4EB03D879B670af0,0xCE43a16E7a848F9c51f41Ef1b77022118527d41A"),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("textarea",{onChange:function(t){return e.setState({allowed:t.target.value.split(",")})},id:"my-textarea",maxLength:"100000","data-counter-label":"",style:{height:"300px",width:"300px"}}),s.a.createElement("br",null))),s.a.createElement("div",{style:{display:this.state.createpolldisplay}},s.a.createElement("h1",{style:{textAlign:"center"}},"Click the button to create your poll"),s.a.createElement("p",{style:{textAlign:"center"}},"Once your poll has been created you will be given the Poll ID. This is used when searching for polls."),s.a.createElement("br",null),s.a.createElement("div",{style:{display:this.state.createspinner,textAlign:"center"}},s.a.createElement("div",{className:"load-1"},s.a.createElement("p",{className:"pulsate"},"Creating Poll...(Approximately 1 Minute)"),s.a.createElement("div",{className:"line",id:"clearline"}),s.a.createElement("div",{className:"line"}),s.a.createElement("div",{className:"line"}),s.a.createElement("div",{className:"line"}))),s.a.createElement("h2",{id:"createdPollHash",style:{textAlign:"center",fontWeight:300}},"Your Poll ID: ",this.state.pollhash)),s.a.createElement("br",null),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("button",{onClick:function(t){return e.nextstep()},className:"button"},this.state.buttonText)))),s.a.createElement("div",{style:{display:this.state.dashboardSpinner}},s.a.createElement("h4",{style:{fontWeight:300,textAlign:"center"}},"Loading..."),s.a.createElement("div",{id:"rect1",className:"wave"}),s.a.createElement("br",null)),s.a.createElement("div",{style:{display:this.state.mydisplay}},s.a.createElement("div",null,s.a.createElement("div",{id:"dashwrapper"},s.a.createElement("div",{className:"row"},this.state.yesNoHTML)),s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement("div",{id:"dashwrapper"},s.a.createElement("div",{className:"row"},this.state.multiHTML)),s.a.createElement("br",null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[297,1,2]]]);
//# sourceMappingURL=main.a92364c9.chunk.js.map